<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compte à Rebours</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
    body {
        font-family: 'Roboto', sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        height: 100vh;
        margin: 0;
        background-color: #f4f4f9;
        color: #333;
        position: relative; /* Ajoutez cette ligne pour permettre l'alignement absolu des éléments enfants */
    }

    .container {
        text-align: center;
        width: 80%;
        max-width: 400px;
        background-color: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        position: absolute; /* Positionner le timer en haut de la page */
        top: 20px; /* Laisser un espace du haut de la page */
        left: 50%; /* Centrer horizontalement */
        transform: translateX(-50%); /* Centrer parfaitement */
    }

    .countdown {
        font-size: 150px;
        font-weight: bold;
        transition: color 0.3s ease;
        margin-bottom: 20px;
        color: #4caf50;
        text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
        width: 400px; /* Fixe la largeur du timer à 500px */
        text-align: center; /* Centre le texte horizontalement */
        margin: 0 auto; /* Centrer le timer horizontalement */
    }

    .progress-bar {
        width: 100%;
        height: 20px;
        background-color: #ddd;
        border-radius: 15px;
        overflow: hidden;
        margin-bottom: 20px;
    }

    .progress {
        height: 100%;
        width: 100%;
        transition: width 1s ease;
    }



        .buttons-group {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            width: 100%;
        }

        button {
            font-size: 40px;
	    font-weight: bold;  /* Texte en gras */
            padding: 20px 30px;
            cursor: pointer;
            border: none;
            border-radius: 12px;
            transition: background-color 0.3s;
            width: 48%;
            background-color: #4caf50;
            color: white;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }

        button:disabled {
            background-color: #888;
            cursor: not-allowed;
        }

        #nextButton {
            background-color: #ff9800;
        }

        

    .bottom-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 40px;
    width: 80%;
    max-width: 400px;
    gap: 5px;
    position: fixed;
    bottom: 100px; /* Positionne les boutons à 100px du bas */
    left: 50%;
    transform: translateX(-50%); /* Centre horizontalement les boutons */
}

.bottom-buttons button {
    font-size: 40px;
    padding: 20px 30px;
    border-radius: 12px;
    background-color: #f44336;
    color: white;
    width: 33%;
    height: 80px;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    text-align: center;
}






@keyframes blink {
    0% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
    100% {
        opacity: 1;
    }
}

.highlight {
    background-color: #ff9800 !important;
    color: white;
    animation: blink 1s infinite; /* Animation de clignotement */
}

#pauseButton {
    background-color: #4caf50;
    transition: background-color 0.3s;
}




        .settings-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #555;
            color: white;
            border: none;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 30px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
            z-index: 1000;
        }

        .modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            opacity: 0;
            transform: scale(0.9);
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .modal-content input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .modal-content input:focus {
            border-color: #4caf50;
            outline: none;
        }

        .modal-content button {
            margin-top: 10px;
            padding: 12px 20px;
            background-color: #4caf50;
            color: white;
            border-radius: 8px;
            border: none;
            transition: background-color 0.3s;
        }

        .modal-content button:hover {
            background-color: #45a049;
        }

        .modal-content .close-button {
            font-size: 28px;
            color: #aaa;
            background: none;
            border: none;
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }

        .modal-content .close-button:hover {
            color: #000;
        }

        /* Show modal and animate */
        .modal.show {
            display: flex;
            opacity: 1;
            visibility: visible;
        }

        .modal-content.show {
            opacity: 1;
            transform: scale(1);
        }

    </style>
</head>
<body>

<div class="container">
    <div class="countdown" id="countdown">00:45</div>
    <div class="progress-bar">
        <div class="progress" id="progress"></div>
    </div>

    <div class="buttons-group">
      <button id="addButton" class="extension" onclick="addTime('addButton')">X(1)</button>
<button id="addButton2" class="extension" onclick="addTime('addButton2')">X(2)</button>

    </div>
</div>

<div class="bottom-buttons">
<button id="nextButton" onclick="resetToNextValue()"><i class="fas fa-circle"></i></button>    
<button onclick="resetTimer()"><i class="fas fa-sync-alt"></i></button>
    <button id="pauseButton" onclick="pauseTimer()"><i class="fas fa-pause"></i></button>
</div>

<button class="settings-button" onclick="openSettings()">
    <i class="fas fa-cog"></i>
</button>

<!-- Fenêtre de paramètres -->
<div id="settingsModal" class="modal" onclick="closeSettings(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
        <button class="close-button" onclick="closeSettings()">&times;</button>
        <h3>Paramètres du Timer</h3>
        <label for="initialTime">Temps Initial :</label>
        <input type="number" id="initialTime" value="60" min="1">
        
        <label for="addTimeValue">Temps d'Extension :</label>
        <input type="number" id="addTimeValue" value="30" min="1">
        
        <label for="nextTimeValue">Temps de Boule :</label>
        <input type="number" id="nextTimeValue" value="30" min="1">

        <button onclick="saveSettings()">Enregistrer</button>
    </div>
</div>

<script>
    let countdownTime = 60;
    let initialTime = 60;
    let addTimeValue = 30;
    let nextTimeValue = 30;
    let countdownInterval;
    let isPaused = false;

	const beepSound = new Audio("data:audio/wav;base64,UklGRk5FAABXQVZFZm10IBAAAAABAAEAAE9mAAUAAEAAf0UAAJ4AAAB2pW6H/xHqAA4e8qZDAZ8Aq4g+74BdAvkqyfDRr9jOGY2UVz8OEdcDyg0XqWnm4u5neLg7S9cNRFgzwGh+8jbve/nmZWBZ1d0Igj0F5k4pkpqRntjtWc7ffGQisjc13tFzrsM7aZKi92E2HFVfD6F6RmTrh6uE+eBeFh2Ln9HFxRrlHlbZQhPgwqHhAFgGGYoGBV35kIi7AopVJqGrJ6Q=");

    	const buzzSound = new Audio("data:audio/wav;base64,UklGRk5FAABXQVZFZm10IBAAAAABAAEAAE9mAAUAAEAAf0UAAJ4AAAB2pW6H/xHqAA4e8qZDAZ8Aq4g+74BdAvkqyfDRr9jOGY2UVz8OEdcDyg0XqWnm4u5neLg7S9cNRFgzwGh+8jbve/nmZWBZ1d0Igj0F5k4pkpqRntjtWc7ffGQisjc13tFzrsM7aZKi92E2HFVfD6F6RmTrh6uE+eBeFh2Ln9HFxRrlHlbZQhPgwqHhAFgGGYoGBV35kIi7AopVJqGrJ6Q=
");
	function startTimer() {
        clearInterval(countdownInterval);
        countdownInterval = setInterval(updateCountdown, 1000);
    }

    



    function addTime(buttonId) {
    if (buttonId === 'addButton' && !document.getElementById('addButton').disabled) {
        countdownTime += addTimeValue +1;
        document.getElementById('addButton').disabled = true;

        // Arrêter le timer avant de mettre à jour
        clearInterval(countdownInterval);
        updateCountdown();
        
        // Relancer le timer si ce n'est pas en pause
        if (!isPaused) {
            startTimer();
        }
    } else if (buttonId === 'addButton2' && !document.getElementById('addButton2').disabled) {
        countdownTime += addTimeValue +1;
        document.getElementById('addButton2').disabled = true;

        // Arrêter le timer avant de mettre à jour
        clearInterval(countdownInterval);
        updateCountdown();
        
        // Relancer le timer si ce n'est pas en pause
        if (!isPaused) {
            startTimer();
        }
    }
}

    




    function resetToNextValue() {
    countdownTime = nextTimeValue;
    updateCountdown();
    if (!isPaused) {  // Si le timer n'est pas en pause, démarrer le timer
        startTimer();
    }
}


    
function resetTimer() {
    countdownTime = initialTime;  // Réinitialiser le timer à la valeur initiale
    updateCountdown();            // Mettre à jour l'affichage du timer
    clearInterval(countdownInterval);  // Stopper le timer
    isPaused = true;              // Mettre le timer en pause
    document.getElementById('pauseButton').innerHTML = '<i class="fas fa-play"></i>'; // Mettre le texte en "Reprendre"
    document.getElementById('pauseButton').classList.add('highlight'); // Ajouter l'effet de clignotement
    document.getElementById('addButton').disabled = false;  // Réactiver le bouton "X Joueur 1"
    document.getElementById('addButton2').disabled = false; // Réactiver le bouton "X Joueur 2"
}

function pauseTimer() {
    isPaused = !isPaused;
    let pauseButton = document.getElementById('pauseButton');
    if (isPaused) {
        clearInterval(countdownInterval);  // Arrêter le timer
        pauseButton.innerHTML = '<i class="fas fa-play"></i>';  // Changer le texte en "Reprendre"
        pauseButton.classList.add('highlight');  // Ajouter l'effet de clignotement lorsque le bouton est en mode "Reprendre"
    } else {
        startTimer();  // Démarrer le timer
        pauseButton.innerHTML = '<i class="fas fa-pause"></i>';  // Changer le texte en "Pause"
        pauseButton.classList.remove('highlight');  // Retirer l'effet de clignotement lorsque le bouton est en mode "Pause"
beepSound.play()
beepSound.pause()
buzzSound.play()
buzzSound.pause()
    }
}

function updateCountdown() {
    // Si le temps est écoulé
    if (countdownTime <= 0) {
        clearInterval(countdownInterval);
        document.getElementById('countdown').textContent = "FIN"; // Affiche "FAUTE"
        document.getElementById('countdown').style.color = 'red'; // Change la couleur en rouge
        document.getElementById('progress').style.backgroundColor = 'red'; // Change la couleur de la barre de progression en rouge
        buzzSound.play(); // Son de fin
        
        return;
    }

    let minutes = Math.floor(countdownTime / 60);
    let seconds = countdownTime % 60;
    document.getElementById('countdown').textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

    const progressBar = document.getElementById('progress');
    progressBar.style.width = `${(countdownTime / initialTime) * 100}%`;

    if (countdownTime >= 6 && countdownTime <= 10) {
        document.getElementById('countdown').style.color = 'yellow';
        progressBar.style.backgroundColor = 'yellow';
    } else if (countdownTime <= 5 && countdownTime > 0) {
        document.getElementById('countdown').style.color = 'red';
        progressBar.style.backgroundColor = 'red';
    } else {
        document.getElementById('countdown').style.color = '#4caf50';
        progressBar.style.backgroundColor = '#4caf50';
    }

    if (countdownTime === 10 || countdownTime === 5) {
        beepSound.play();
    }

    countdownTime--;
}




    function openSettings() {
        const modal = document.getElementById('settingsModal');
        const modalContent = document.querySelector('.modal-content');
        modal.style.display = 'flex';
        setTimeout(() => {
            modal.classList.add('show');
            modalContent.classList.add('show');
        }, 10);
    }

    function closeSettings(event) {
        const modal = document.getElementById('settingsModal');
        const modalContent = document.querySelector('.modal-content');
        modal.classList.remove('show');
        modalContent.classList.remove('show');
        setTimeout(() => {
            modal.style.display = 'none';
        }, 300);
    }

    function saveSettings() {
        initialTime = parseInt(document.getElementById('initialTime').value);
        addTimeValue = parseInt(document.getElementById('addTimeValue').value);
        nextTimeValue = parseInt(document.getElementById('nextTimeValue').value);
        resetTimer();
        closeSettings();
    }

    
window.onload = function() {
    updateCountdown(); // Juste mettre à jour l'affichage
    isPaused = true; // Le timer reste en pause
    let pauseButton = document.getElementById('pauseButton');
    pauseButton.innerHTML = '<i class="fas fa-play"></i>';
    pauseButton.classList.add('highlight'); // Appliquer la couleur orange et l'animation de clignotement
};





</script>

</body>
</html>
